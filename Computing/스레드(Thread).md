스레드(Thread)에 대하여
===============
- 프로세스 내에서 실행되는 흐름의 단위
- 일반적으로 한 프로그램은 하나의 스레드 but, 둘 이상의 스레드를 동시에 실행하는 것이 멀티 스레드

프로세스와 비교
-----------
- 멀티 프로세스와 멀티 스레드 양쪽 모두 여러 흐름이 동시에 진행
- 그러나 멀티 프로세스에서 각 프로세스는 독립적으로 실행
- 각각 별개의 메모리를 차지
- 멀티 스레드는 프로세스 내의 메모리를 공유하여 사용
- 스레드 간의 전환 속도 > 프로세스 간의 전환 속도
- CPU가 여러 개일 경우에 각각의 CPU가 스레드 하나씩 담당하는 방법으로 속도를 높임

### 단점
- 각각의 스레드 중 어떤 것이 먼저 실행될 지 순서를 알 수 없음
- 스레드의 실행 조건에 따라 결과가 다르게 나오며, 오류가 발생했을 때 원인 찾기 힘듬
- 이런 문제를 경쟁 조건이라고 하며 
- 세마 포어와 같은 방법을 통해 공유 데이터에 접근하는 스레드 개수를 한개 이하로 유지

#### 경쟁 조건(경쟁 상태)
- 공우 자원에 대해 여러 개의 프로세스가 동시에 접근을 시도할 때 접근의 타이밍이나
- 순서 등이 결과값에 영향을 줄 수 있는 상태
- 동시에 접근할 때 자료의 일관성을 해치는 결과가 나타날 수 있음

#### 세마포어
- 두 개의 원자적 함수로 조적 되는 정수 변수
- 멀티프로그래밍 환경에서 공유 자원에 대한 접근을 제한 하는 방법
- 모든 교착 상태를 해결하지는 못함
- 세마포어 S는 정수 값을 가지는 변수
- P와 V라는 명령에 의해서만 접근
- P는 임계 구역에 들어가기 전에 수행, V는 임계 구역에서 나올 때 수행
- 변수 값을 수정하는 연산은 모두 원자성을 만족해야 함
- 한 프로세스에서 세마포어 값을 변경하는 동안 다른 프로세스가 동시에 이 값을 변경해서는 안 됨
- 바쁜 대기 방법 / 재움 큐를 활용한 프로세스 재우기 방법

##### 임계구역(공유 변수 영역)
- 병렬컴퓨팅에서 둘 이상의 스레드가 동시에 접근해서는 안되는 공유 자원을 접근하는 코드의 일부

##### 원자성
- 어떤 것이 더 이상 쪼개질 수 없는 성질
- 어떠한 작업이 실행될 때 언제나 완전하게 진행되어 종료되거나 그럴 수 없는 경우, 실행하지 않는 경우
- 원자성을 가지는 작업은 실행되어 진행되다가 종료하지 않고 중간에서 멈추는 경우는 있을 수 없음

### 스레드의 종류
#### 사용자 레벨 스레드
- 사용자 스레드는 커널 영역의 상위에서 지원
- 일반적으로 사용자 레벨의 라이브러리를 통해 구현
- 라이브러리는 스레드의 생성 및 스케줄링 등에 관한 관리 기능 제공

#### 커널 레벨 스레드
- 커널 스레드는 운영체제가 지원하는 스레드 기능으로 구현
- 커널이 스레드의 생성 및 스케줄링을 관리

### 스레드 데이터
#### 스레드 기본 데이터
- 스레드도 프로세스와 마찬가지로 하나의 실행 흐름이므로 실행과 관련한 데이터가 필요
- 일반적으로 스레드는 고유한 스레드 ID, 프로그램 카운터, 레지스터 집합, 스택을 가짐
- 코드, 데이터, 파일 등 기타 자원은 프로세스 내의 다른 스레드와 공유

#### 스레드 특정 데이터
- 하나의 스레드에만 연관된 데이터가 필요한 경우
- 멀티 스레드에서 모든 스레드는 프로세스의 데이터를 공유
- 특별한 경우에는 개별 스레드만의 자료 공간이 필요

멀티 스레딩
-----------
- 여러 개의 스레드를 효과적으로 실행할 수 있는 하드웨어 지원을 갖추는 것
- 스레드가 모두 같은 주소 공간에서 동작하여 하나의 CPU 캐시 공유 집합과 
- 하나의 변환 색인 버퍼만 있는 멀티프로세서 시스템과는 구별
### 변환 색인 버퍼
- 가상 메모리 주소를 물리적인 주소로 변환하는 속도를 높이기 위해 사용되는 캐시

### 장점
- 응답성: 대화형 프로그램을 멀티스레드화하면, 프로그램의 일부분이 중단되거나 긴 작업을 수행하더라도 프로그램이 수행되어 사용자에 대한 응답성이 증가
- 자원 공유: 스레드는 자동적으로 속한 프로세스의 자원들과 메모리를 공유, 같은 주소 공간에서 다른 활동성 스레드를 가질 수 있음
- 경제성: 프로세스 생성에 메모리와 자원들 할당하는 부분은 비용이 큼, 자원을 공유하기 때문에 더 경제적
- 멀티프로세서 활용: 멀티 프로세서 구조에서는 각각의 스레드가 다른 프로세서에서 병렬로 수행될 수 있음, 다중 CPU에서 병렬성이 증가

### 단점
- 캐시나 변환 색인 버퍼와 같은 하드웨어 리소스를 공유할 때 서로를 간섭할 가능성
- 하나의 스레드만 실행 중인 경우 싱글 스레드보다 지연 가능성
- 멀티스레딩의 하드웨어 지원을 위해 응용 프로그램과 운영 체제 둘다 변화가 필요
- 스레드 스케줄링은 멀티스레드의 주요 문제

### 모델
- 다-대-일: 여러 개의 사용자 수준 스레드을이 하나의 커널 스레드로 매핑되는 방식, 사용자 수준에서 스레드 관리가 이루어짐
- 일-대-일: 사용자 스레드들을 각각 하나의 커널 스레드로 매핑시키는 방식 
- 다-대-다: 여러 개의 사용자 스레드들 여러 개의 커널 스레드로 매핑시키는 모델



 참고자료
-----------
https://ko.wikipedia.org/wiki/%EC%8A%A4%EB%A0%88%EB%93%9C_(%EC%BB%B4%ED%93%A8%ED%8C%85)    
https://ko.wikipedia.org/wiki/%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%94%A9?tableofcontents=1    
https://www.youtube.com/watch?v=iks_Xb9DtTM